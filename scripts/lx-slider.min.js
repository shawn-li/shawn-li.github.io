!function(t){var e,o,i,s=0,n=["","Webkit","Moz","O","ms"],a=function(t,e){for(var o,i={},s=0;s<n.length;s++)""!=n[s]?(o=t,i[o]=e):(o="-"+n[s]+"-"+t,i[o]=e);return i};t.fn.lxslider=function(n){var l=t.extend({},t.fn.lxslider.defaults,n);t(this).css({height:l.boxHeight,"min-width":400,margin:"20px auto",border:"1px solid blue",position:"relative"}),console.log(t.fn.lxslider.defaults),console.log(n);var c=this;e=c.find(l.sliderItem),o=e.parent(),targetNum=e.length,console.log(o),o.append('<ul class="targetList"></ul>'),i=t(".targetList"),console.log(t(this)[0].id);var h=t(c).width(),r=t(this).height();console.log("sliderHeight "+r+"| sliderWidth "+h);var g=.9*l.boxHeight,u=g*l.imgRatio,d=(h-u)/2;console.log("img_height "+g+"| img_width "+u);var m=l.boxHeight/50>5?l.boxHeight/50:5,f=l.boxHeight/50>5?l.boxHeight/50:5,p=l.boxHeight/25>10?l.boxHeight/25:10,_=t(l.pre_button).height(),b=t(l.next_button).height();0==l.autoFlag&&t(l.stop_button).html("开启"),e.each(function(e){t(this).find("img").css({height:g,width:u}),t(this).css("position","absolute"),t(this).css({positon:"absolute",top:"5%",left:d}),"animate"==l.changeType&&(t(this).css({"z-index":"2"}),t(this).css(a("opacity",0)),0==e&&(t(this).css({"z-index":"3"}),t(this).css(a("opacity",1)))),"animate"!=l.changeType&&0!=e&&t(this).css("display","none")});for(var v=0;v<targetNum;v++)i.append('<li data-target="'+v+'"><div></div></li>');console.log(t(c).height()),i.find("li").find("div").css({"background-color":"#aaa","margin-right":p,width:f,height:m}),i.css({top:.85*l.boxHeight,left:(h-t(".targetList").width())/2}),i.find("li").eq(0).find("div").css("background-color","#fff"),t(l.pre_button).css({left:.05*h,top:(r-_)/2,position:"absolute"}),t(l.next_button).css({right:.05*h,top:(r-b)/2,position:"absolute"}),t(l.stop_button).css({right:0,top:0,position:"absolute"});var x,y=function(){if("fade"==l.changeType)t(e[s]).fadeIn("fast");else if("slide"==l.changeType)t(e[s]).slideDown("fast");else if("animate"==l.changeType){var o={};o.transition="opacity "+l.animateTime+"ms ease-in-out",o["-ms-transition"]="-ms-opacity "+l.animateTime+"ms ease-in-out",o["-moz-transition"]="-moz-opacity "+l.animateTime+"ms ease-in-out",o["-webkit-transition"]="-webkit-opacity "+l.animateTime+"ms ease-in-out",o["-o-transition"]="-o-opacity "+l.animateTime+"ms ease-in-out",o["z-index"]=3,t(e[s]).css(a("opacity",1)),t(e[s]).css(o)}l.changeEnd()},T=function(){e.each(function(e,o){"animate"!=l.changeType?t(this).css("display","none"):(t(this).css({"z-index":"2"}),t(this).css(a("opacity",0))),i.find("li").find("div").css("background-color","#aaa")}),i.find("li").eq(s).find("div").css("background-color","#fff"),y()},N=function(t){t&&(clearInterval(x),x=setInterval(function(){console.log(s),s++,s==targetNum?(s=0,T()):T()},l.changeTime))};N(l.autoFlag),i.find("li").click(function(){s=t(this).attr("data-target"),T(),N()}),t(l.pre_button).click(function(){console.log(s),s>0?(s--,console.log("上一页:"+s)):0==s&&(s=targetNum-1),T(),l.preEnd(),N(l.autoFlag)}),t(l.next_button).click(function(){console.log(s),s<targetNum-1?(s++,console.log("下一页:"+s),console.log(e[s])):s==targetNum-1&&(s=0),T(),l.nextEnd(),N(l.autoFlag)}),t(l.stop_button).click(function(){l.autoFlag?(clearInterval(x),l.autoFlag=!1,t(this).html("开启")):(l.autoFlag=!0,N(l.autoFlag),t(this).html("停止"))}),t(l.pre_button).hover(function(){t(this).addClass(l.pre_hover_style_className)}).mouseout(function(){t(this).removeClass(l.pre_hover_style_className)}),t(l.next_button).hover(function(){t(this).addClass(l.next_hover_style_className)}).mouseout(function(){t(this).removeClass(l.next_hover_style_className)}),t(l.stop_button).hover(function(){t(this).addClass(l.stop_hover_style_className)}).mouseout(function(){t(this).removeClass(l.stop_hover_style_className)})},t.fn.lxslider.defaults={boxHeight:600,imgRatio:5/6,sliderItem:".sliderItem",animateTime:500,pre_button:".cover_pre",next_button:".cover_next",stop_button:".stop",changeType:"fade",changeTime:2e3,autoFlag:!0,pre_hover_style_className:"btn_hover",next_hover_style_className:"btn_hover",stop_hover_style_className:"btn_hover",changeEnd:function(){console.log(this.changeType+" Finish!")},preEnd:function(){console.log("pre Finish!")},nextEnd:function(){console.log("next Finish!")}}}(jQuery);