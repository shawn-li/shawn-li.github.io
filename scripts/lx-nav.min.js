!function(a,t){a.fn.lxnav=function(o){var l=a(window);$lxNav=a(".lx-nav"),$html_body=a("html,body"),$wrap=a("#wrap"),$lxNav_wrap=a(".lx-nav-wrap"),$lxNav_Pre=a(".lx-nav-pre"),$lxNav_Next=a(".lx-nav-next"),$lxNav_toTop=a(".lx-nav-toTop"),$lxNav_section=a(".lx-nav-section"),$lxNav_Item=a(".lx-nav-item"),$lxNav_box=a(".lx-nav-box");var e=a.extend({},a.fn.lxnav.default,o);a(".lx-nav-item").length;"auto"!=e.sidebarHeight&&"number"==typeof e.sidebarHeight&&$lxNav.css("height",e.sidebarHeight),"auto"!=e.wrapWidth?$lxNav.css("width",e.navWidth):$lxNav.css("width","100%"),"auto"!=e.sectionHeight&&"number"==typeof e.sectionHeight?$lxNav_section.css("height",e.sectionHeight):"auto"==e.sectionHeight&&(e.sectionHeight=$lxNav_section.eq(1).offset().top),"auto"!=e.preAndNextBox_Top&&$lxNav_box.css({top:e.preAndNextBox_Top}),"auto"!=e.preAndNextBox_Right&&$lxNav_box.css({right:e.preAndNextBox_Right});for(var n=[],v=0;v<$lxNav_section.length;v++)console.log(v+"==="+$lxNav_section.eq(v).offset().top),n.push(t.round($lxNav_section.eq(v).offset().top));for(var i=[],v=0;v<$lxNav_Item.length;v++)i.push($lxNav_section.eq(v).attr("data-lx-nav"));for(var r=[],v=0;v<$lxNav_Item.length;v++)r.push($lxNav_Item.eq(v).attr("data-lx-nav"));console.log(n),console.log(i),console.log(r),$lxNav_wrap.css({"background-color":e.navBgColor}),$lxNav_wrap.css({"-moz-opacity":e.navOpacity,"-ms-opacity":e.navOpacity,"-webkit-opacity":e.navOpacity,opacity:e.navOpacity});var c=function(t){var o;return $lxNav_section.each(function(){a(this).attr("data-lx-nav")==t&&(o=a(this).offset().top,console.log("top--"+o))}),o},s=function(a){for(var o=0,l=0,e=0,v=0;v<n.length;v++)a>n[v]&&(o=t.round(n[v]),l=v);for(var c=i[l],v=0;v<r.length;v++)r[v]==c&&(e=v,$lxNav_Item.eq(e).addClass("active"));return console.log("nav目标data-lx-nav值"+c),console.log("section目标序号"+l),console.log("nav目标序号"+e),o},x=function(a){for(var o=0,l=0,e=0,v=n.length-1;v>0;v--)t.round(a)<n[v]&&(o=t.round(n[v]),l=v);for(var c=i[l],v=0;v<r.length;v++)r[v]==c&&(e=v,$lxNav_Item.eq(e).addClass("active"));return console.log("nav目标data-lx-nav值"+c),console.log("section目标序号"+l),console.log("nav目标序号"+e),o};$lxNav_Item.click(function(t){var o=a(this),l=o.parent().parent().children();a(l).find("a").removeClass("active"),o.addClass("active"),console.log(o.attr("data-lx-nav"));var n=o.attr("data-lx-nav"),v=c(n);return console.log(v),$html_body.animate({scrollTop:v},800),e.afterScroll(v),0==v?$lxNav_wrap.fadeOut("fast"):($lxNav_wrap.fadeIn("slow"),console.log(333)),!1}),a(window).scroll(function(a){$lxNav_wrap.fadeOut("fast")}),$html_body.bind("mousewheel",function(){a(".lx-nav-item").removeClass("active")}),a(".lx-nav-flag").click(function(){e.lxnavFlag?(e.lxnavFlag=!1,a(this).find("a").html("顶层导航-开")):(e.lxnavFlag=!0,a(this).find("a").html("顶层导航-关"))}),$html_body.click(function(a){if(!e.lxnavFlag)return!1;if(l.scrollTop()>=t.round(e.sectionHeight)){if("none"==$lxNav_wrap.css("display"))return $lxNav_wrap.fadeIn("fast"),!1;if("block"==$lxNav_wrap.css("display"))return $lxNav_wrap.fadeOut("fast"),!1}}),$lxNav_Pre.click(function(){$lxNav_Item.removeClass("active");var a=l.scrollTop(),o=s(a),v=n.indexOf(t.round(o)),i=$lxNav_section.eq(v).attr("data-lx-nav"),c=r.indexOf(i);return $lxNav_Item.eq(c).addClass("active"),$html_body.animate({scrollTop:o},800),console.log("目标滚动到的位置"+o),e.afterScroll(o),!1}),$lxNav_Next.click(function(){$lxNav_Item.removeClass("active");var a=l.scrollTop();console.log(a);var o=x(a),v=n.indexOf(t.round(o)),i=$lxNav_section.eq(v).attr("data-lx-nav"),c=r.indexOf(i);return $lxNav_Item.eq(c).addClass("active"),$html_body.animate({scrollTop:o},800),console.log("目标滚动到的位置"+o),e.afterScroll(o),!1}),$lxNav_toTop.click(function(){return $lxNav_Item.removeClass("active"),$html_body.animate({scrollTop:0},800),!1})},a.fn.lxnav.default={sidebarHeight:"auto",sectionHeight:"auto",navItemWidth:"auto",navWidth:"100%",navBgColor:"#fff",navOpacity:.8,preAndNextBox_Top:"auto",preAndNextBox_Right:"auto",lxnavFlag:!0,afterScroll:function(a){}}}(jQuery,Math);